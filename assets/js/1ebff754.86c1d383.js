"use strict";(self.webpackChunkmy_wiki=self.webpackChunkmy_wiki||[]).push([[567],{8344:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var i=o(9755),s=o(4848),a=o(8453);const t={title:"How I use Karabiner to remap my Mac keyboard",tags:[{label:"Mac",permalink:"mac"},{label:"Tips & Configs",permalink:"tips-and-configs"},{label:"Computers",permalink:"computers"}],toc_min_heading_level:2,toc_max_heading_level:3,authors:"ethan"},r=void 0,c={authorsImageUrls:[void 0]},d=[{value:"Keys that I Need to Remap",id:"keys-that-i-need-to-remap",level:2},{value:"The <code>z</code> Key",id:"the-z-key",level:2},{value:"Arrow Keys",id:"arrow-keys",level:3},{value:"Opening Apps",id:"opening-apps",level:3},{value:"More Shortcuts",id:"more-shortcuts",level:3},{value:"<code>= + Delete</code>",id:"--delete",level:2},{value:"Remapping <code>CapsLock</code>",id:"remapping-capslock",level:2},{value:"The <code>CapsLock</code> Variable",id:"the-capslock-variable",level:3},{value:"<code>CapsLock</code> as <code>Option</code>",id:"capslock-as-option",level:3},{value:"<code>CapsLock</code> as <code>Control</code>",id:"capslock-as-control",level:3},{value:"<code>CapsLock</code> as <code>Command</code>",id:"capslock-as-command",level:3},{value:"<code>CapsLock</code> + <code>z</code>",id:"capslock--z",level:3},{value:"<code>CapsLock</code> + click",id:"capslock--click",level:3},{value:"Left <code>Shift</code> + <code>CapsLock</code>",id:"left-shift--capslock",level:3},{value:"Full Configuration",id:"full-configuration",level:2},{value:"Comparing AutoHotKey, keyd and Karabiner",id:"comparing-autohotkey-keyd-and-karabiner",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Remarks",id:"remarks",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["A couple of months ago, I got a MacBook Pro. The first thing I need to do is to\nremap the keyboard,\n",(0,s.jsx)(n.a,{href:"/blog/2024/09/08/keyd",children:"just like what did I with my Ubuntu laptop using keyd"}),".\nOnce again, I realize the ",(0,s.jsx)(n.code,{children:"CapsLock"})," is not useful enough for it to earn this\nprecious place. I keep accidentally pressing the ",(0,s.jsx)(n.code,{children:"CapsLock"})," key, thinking it\nwill work like a ",(0,s.jsx)(n.code,{children:"Control"})," key in Windows/Ubuntu. This post is about how I try\nto replicate the setup I had in ",(0,s.jsx)(n.a,{href:"/blog/2024/09/08/keyd",children:"keyd"})," to Mac with\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/",children:"Karabiner-Elements"}),". I will show you how\nto"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create custom forward delete"}),"\n",(0,s.jsxs)(n.li,{children:["Using ",(0,s.jsx)(n.code,{children:"z + h/j/k/l"})," as arrows"]}),"\n",(0,s.jsxs)(n.li,{children:["Switch between chosen apps with ",(0,s.jsx)(n.code,{children:"z + <number>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Make ",(0,s.jsx)(n.code,{children:"CapsLock"})," useful again by mapping it to multiple modifier keys, etc."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Spoiler, I underestimated the complexity it can get."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://imgs.xkcd.com/comics/borrow_your_laptop.png",alt:"xkcd 1806"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.a,{href:"https://xkcd.com/1806/",children:"xkcd 1806: borrow your laptop"})})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"In reality, there are very few situations where my configuration would make"}),"\n",(0,s.jsx)(n.em,{children:"my keyboard unusable by other people. You'll see below."})]}),"\n",(0,s.jsx)(n.h2,{id:"keys-that-i-need-to-remap",children:"Keys that I Need to Remap"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/blog/2024/09/08/keyd",children:"In my post about keyd"}),", I shared what configurations I\nhave on my Ubuntu laptop. Unfortunately, not all of it can be converted to Mac\nthe way I want. I listed down what I need the most."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z + h/j/k/l"})," function as arrow keys"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CapsLock"})," mimic what I had for the ",(0,s.jsx)(n.code,{children:"CapsLock"})," in Windows/Ubuntu","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Function as ",(0,s.jsx)(n.code,{children:"Cmd"})," for things like open/close tab, copy and paste, etc."]}),"\n",(0,s.jsxs)(n.li,{children:["Function as ",(0,s.jsx)(n.code,{children:"Ctrl"})," for things like ",(0,s.jsx)(n.code,{children:"Ctrl + d"}),", ",(0,s.jsx)(n.code,{children:"Ctrl + u"})," in Vim"]}),"\n",(0,s.jsxs)(n.li,{children:["Function as ",(0,s.jsx)(n.code,{children:"Opt"})," for backspace, like ",(0,s.jsx)(n.code,{children:"Ctrl + backspace"})," that backspace a\nword"]}),"\n",(0,s.jsxs)(n.li,{children:["Function as ",(0,s.jsx)(n.code,{children:"Esc"})," when pressed alone"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"There are also configurations that I specifically added because of Mac."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"="})," + ",(0,s.jsx)(n.code,{children:"Delete"})," is the real ",(0,s.jsx)(n.code,{children:"Delete"}),", deleting the character after the cursor"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z + <num>"})," will open apps"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In Mac, the ",(0,s.jsx)(n.code,{children:"Delete"})," key is just backspace and there is no ",(0,s.jsx)(n.code,{children:"Delete"})," key in the\nlayout. I added ",(0,s.jsx)(n.code,{children:"="})," and ",(0,s.jsx)(n.code,{children:"Delete"})," press simultaneously works as a delete key\nbeing pressed. And for the rest of the post, I will call the key labelled as\n",(0,s.jsx)(n.code,{children:"Delete"})," on the keyboard as ",(0,s.jsx)(n.code,{children:"Backspace"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["In Windows or Ubuntu, I can use ",(0,s.jsx)(n.code,{children:"Win + <num>"})," to open apps that I pinned to the\ndock. For example, Win+1 is always the terminal, Win+2 is the browser, etc. And\nI can configure 10 apps that I frequently need and quickly switch between them\nwithout the need to loop through ",(0,s.jsx)(n.code,{children:"Alt+Tab"}),". However, surprisingly, Mac does not\nhave this feature! With that, I mapped ",(0,s.jsx)(n.code,{children:"z + <num>"})," to apps that I frequently use\nand switch between them."]}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.a,{href:"/blog/2024/09/08/keyd",children:"keyd post"}),", I shared a few more shortcuts for\nwindows management, audio playback and shortcut strings, but I don't need those\nany more. Either Mac supports them well enough, or I really don't use them now.\nFor example, the media play / pause / forward / backward comes by default in the\nmedia keys row on the Mac keyboard."]}),"\n",(0,s.jsxs)(n.p,{children:["I choose ",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/",children:"Karabiner-Elements"})," because I\nlearned about it long time ago, even before I started remapping my keyboards.\nBack then, I was not using a Mac, so I started with\n",(0,s.jsx)(n.a,{href:"https://www.autohotkey.com/",children:"AutoHotkey"})," on Windows and\n",(0,s.jsx)(n.a,{href:"https://github.com/rvaiya/keyd",children:"keyd"})," in Ubuntu. Now I got my hands on a Mac, I\ndid not consider other alternatives before choosing Karabiner."]}),"\n",(0,s.jsx)(n.p,{children:"This post goes through my configurations in Karabiner one by one. All of my\nconfigurations are complex modifications in the Karabiner-Elements app."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Complex Modifications",src:o(6915).A+"",width:"2424",height:"1688"})}),"\n",(0,s.jsxs)(n.p,{children:["Throughout the blog, if you find anything not working, the\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/manual/operation/eventviewer/",children:"Event Viewer"}),"\nis super helpful to debug and display what keys are pressed, the states of the\nvariables, etc."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Event Viewer",src:o(5282).A+"",width:"2424",height:"1628"})}),"\n",(0,s.jsxs)(n.h2,{id:"the-z-key",children:["The ",(0,s.jsx)(n.code,{children:"z"})," Key"]}),"\n",(0,s.jsxs)(n.p,{children:["Let's start with the simpler modifications around the ",(0,s.jsx)(n.code,{children:"z"})," key. I started using\n",(0,s.jsx)(n.code,{children:"z"})," as my extra modifier (called layer in ",(0,s.jsx)(n.code,{children:"keyd"}),") ever since I started remapping\nmy keyboard. The ",(0,s.jsx)(n.code,{children:"z"})," key is rarely used, meaning I can overload it without\nnoticeable inconvenience. If you are new to this idea, you can think of ",(0,s.jsx)(n.code,{children:"z"})," as\nanother ",(0,s.jsx)(n.code,{children:"Shift"})," key. The ",(0,s.jsx)(n.code,{children:"Shift"})," key gives your whole keyboard another layer on\nhold, and I just make the ",(0,s.jsx)(n.code,{children:"z"})," key do the same."]}),"\n",(0,s.jsx)(n.h3,{id:"arrow-keys",children:"Arrow Keys"}),"\n",(0,s.jsxs)(n.p,{children:["I do not like to move my palm to find the arrow keys. I am used to pressing the\n",(0,s.jsx)(n.code,{children:"z"})," key as the modifier and use ",(0,s.jsx)(n.code,{children:"hjkl"})," as the four arrow keys. ",(0,s.jsx)(n.code,{children:"hjkl"})," references\nthe four direction in Vim, where ",(0,s.jsx)(n.code,{children:"h"})," is left, ",(0,s.jsx)(n.code,{children:"j"})," is down, ",(0,s.jsx)(n.code,{children:"k"})," is up, and ",(0,s.jsx)(n.code,{children:"l"})," is\nright."]}),"\n",(0,s.jsxs)(n.p,{children:["For our first rule, navigate to the complex configurations tab in\nKarabiner-Elements and add a new rule. First, we give a description and set a\nvariable with the\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/set-variable/",children:(0,s.jsx)(n.code,{children:"to.set_variable"})}),"\nfunction to indicate the ",(0,s.jsx)(n.code,{children:"z"})," key is held."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "z + hjkl for arrow key",\n  "manipulators": [\n    {\n      "from": {\n        "key_code": "z",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [{ "set_variable": { "name": "z_pressed", "value": 1 } }],\n      "to_after_key_up": [\n        { "set_variable": { "name": "z_pressed", "value": 0 } }\n      ],\n      "to_if_alone": [{ "key_code": "z" }],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Manipulators in Karabiner are applied in the order that they are defined, from\nthe top to the bottom. This first manipulator defines 3 things when the ",(0,s.jsx)(n.code,{children:"z"})," key\nis pressed (",(0,s.jsx)(n.code,{children:"from"}),"):"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["(",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/",children:(0,s.jsx)(n.code,{children:"to"})}),")\nwhen ",(0,s.jsx)(n.code,{children:"z"})," is pressed, set the variable ",(0,s.jsx)(n.code,{children:"z_pressed"})," to 1"]}),"\n",(0,s.jsxs)(n.li,{children:["(",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to-after-key-up/",children:(0,s.jsx)(n.code,{children:"to_after_key_up"})}),")\nwhen ",(0,s.jsx)(n.code,{children:"z"})," is released after press, set the variable ",(0,s.jsx)(n.code,{children:"z_pressed"})," to 0"]}),"\n",(0,s.jsxs)(n.li,{children:["(",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to-if-alone/",children:(0,s.jsx)(n.code,{children:"to_if_alone"})}),")\nwhen ",(0,s.jsx)(n.code,{children:"z"})," is pressed and released without another key is being pressed, output\n",(0,s.jsx)(n.code,{children:"z"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"z_pressed"})," variable is what makes ",(0,s.jsx)(n.code,{children:"z"})," behaves like a ",(0,s.jsx)(n.code,{children:"modifier"}),". Notice\nthat the third rule, ",(0,s.jsx)(n.code,{children:"to_if_alone"}),", is important. Otherwise, we lost the ",(0,s.jsx)(n.code,{children:"z"}),"\nkey."]}),"\n",(0,s.jsxs)(n.p,{children:["Then, based on the ",(0,s.jsx)(n.code,{children:"z_pressed"})," variable, modify the ",(0,s.jsx)(n.code,{children:"hjkl"})," to output the arrow\nkeys when ",(0,s.jsx)(n.code,{children:"z"})," is pressed using\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/conditions/variable/",children:(0,s.jsx)(n.code,{children:"conditions.variable_if"})}),".\nFor example, only when ",(0,s.jsx)(n.code,{children:"z_pressed"})," is true, remap ",(0,s.jsx)(n.code,{children:"j"})," to ",(0,s.jsx)(n.code,{children:"down_arrow"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "z + hjkl for arrow key",\n  "manipulators": [\n    // others ...\n    {\n      "conditions": [\n        { "name": "z_pressed", "type": "variable_if", "value": 1 }\n      ],\n      "from": {\n        "key_code": "j",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [{ "key_code": "down_arrow" }],\n      "type": "basic"\n    }\n    // similar for k, h, and l for up, left, and right respectively\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"opening-apps",children:"Opening Apps"}),"\n",(0,s.jsxs)(n.p,{children:["This is something I added in Mac, I want to use the ",(0,s.jsx)(n.code,{children:"z + <num>"})," combination to\nopen specific apps, like what I can do in Windows/Ubuntu that opens apps that\nare pinned to the dock with ",(0,s.jsx)(n.code,{children:"Win + <num>"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["We can reuse the ",(0,s.jsx)(n.code,{children:"z_pressed"})," variable across different rules. For the ",(0,s.jsx)(n.code,{children:"to"}),"\nevent, we can use\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/software_function/open_application/",children:(0,s.jsx)(n.code,{children:"software_function.open_application"})}),"\nand supply a file path."]}),"\n",(0,s.jsxs)(n.p,{children:["Here is a sample configuration for mapping ",(0,s.jsx)(n.code,{children:"z + 1"})," to open iterm2."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "Open apps by z + num",\n  "manipulators": [\n    {\n      "conditions": [\n        { "name": "z_pressed", "type": "variable_if", "value": 1 }\n      ],\n      "from": {\n        "key_code": "1",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [\n        {\n          "software_function": {\n            "open_application": { "file_path": "/Applications/iTerm.app" }\n          }\n        }\n      ],\n      "type": "basic"\n    }\n    // Many others\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["I have ",(0,s.jsx)(n.code,{children:"z + 2"})," as my browser, ",(0,s.jsx)(n.code,{children:"z + 3"})," for slack, ",(0,s.jsx)(n.code,{children:"z + 4"})," for Notion, etc. You\ncan define what apps you would like to set for each key. On Mac, usually you\nwill be able to find the file path of an application in the ",(0,s.jsx)(n.code,{children:"/Applications"}),"\nfolder."]}),"\n",(0,s.jsx)(n.h3,{id:"more-shortcuts",children:"More Shortcuts"}),"\n",(0,s.jsxs)(n.p,{children:["I added a few more shortcuts with the ",(0,s.jsx)(n.code,{children:"z"})," key, this includes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z + v"})," to ",(0,s.jsx)(n.code,{children:"Command + Shift + v"})," for paste without formatting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z + p"})," to ",(0,s.jsx)(n.code,{children:"Command + Shift + p"})," for command prompt in VS Code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z + slash"})," to ",(0,s.jsx)(n.code,{children:"Command + Shift + slash"})," for the Help Menu on the menu bar"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Here is one example for ",(0,s.jsx)(n.code,{children:"z + v"})," to ",(0,s.jsx)(n.code,{children:"Command + Shift + v"}),". You can add multiple\nmodifier keys in the to list."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "conditions": [{ "name": "z_pressed", "type": "variable_if", "value": 1 }],\n  "from": {\n    "key_code": "p",\n    "modifiers": { "optional": ["any"] }\n  },\n  "to": [\n    {\n      "key_code": "p",\n      "modifiers": ["left_command", "left_shift"]\n    }\n  ],\n  "type": "basic"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["At last, same as what I did in Ubuntu ",(0,s.jsx)(n.code,{children:"keyd"}),", I remapped ",(0,s.jsx)(n.code,{children:"z+i"})," and ",(0,s.jsx)(n.code,{children:"z+o"})," back to\n",(0,s.jsx)(n.code,{children:"zi"})," and ",(0,s.jsx)(n.code,{children:"zo"})," because it is common to type ",(0,s.jsx)(n.code,{children:"zi"})," and ",(0,s.jsx)(n.code,{children:"zo"})," together when typing\nfast and then the ",(0,s.jsx)(n.code,{children:"z"})," key is captured and missed. For me, they are the two most\ncommon characters following ",(0,s.jsx)(n.code,{children:"z"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "z + hjkl for arrow key",\n  "manipulators": [\n    // others ...\n    {\n      "conditions": [\n        { "name": "z_pressed", "type": "variable_if", "value": 1 }\n      ],\n      "from": {\n        "key_code": "i",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [{ "key_code": "z" }, { "key_code": "i" }],\n      "type": "basic"\n    }\n    // similar for o\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"I will share the full karabiner configs below at the end."}),"\n",(0,s.jsx)(n.h2,{id:"--delete",children:(0,s.jsx)(n.code,{children:"= + Delete"})}),"\n",(0,s.jsxs)(n.p,{children:["In Windows or Ubuntu, there are ",(0,s.jsx)(n.code,{children:"Backspace"})," and ",(0,s.jsx)(n.code,{children:"Delete"}),". ",(0,s.jsx)(n.code,{children:"Backspace"})," removes\nthe character on the left (backward) of the cursor, while ",(0,s.jsx)(n.code,{children:"Delete"})," removes the\nright (forward)."]}),"\n",(0,s.jsxs)(n.p,{children:["In Mac, the ",(0,s.jsx)(n.code,{children:"Delete"})," key is actually backspace and there is no ",(0,s.jsx)(n.code,{children:"Delete"})," key. I\nfind it inconvenient, and it looks like it is a common modification in Karabiner\nto remap ",(0,s.jsx)(n.code,{children:"="})," and ",(0,s.jsx)(n.code,{children:"Delete"})," pressing simultaneously to be the actual ",(0,s.jsx)(n.code,{children:"Delete"}),",\nusing the\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/from/simultaneous/",children:(0,s.jsx)(n.code,{children:"from.simultaneous"})}),"\nfunction."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "Change equal+delete to forward_delete if these keys are pressed simultaneously",\n  "manipulators": [\n    {\n      "from": {\n        "modifiers": { "optional": ["any"] },\n        "simultaneous": [\n          { "key_code": "equal_sign" },\n          { "key_code": "delete_or_backspace" }\n        ]\n      },\n      "to": [{ "key_code": "delete_forward" }],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"remapping-capslock",children:["Remapping ",(0,s.jsx)(n.code,{children:"CapsLock"})]}),"\n",(0,s.jsx)(n.p,{children:"Now we get into the complicated part!"}),"\n",(0,s.jsxs)(n.p,{children:["As mentioned above, I am used to ",(0,s.jsx)(n.code,{children:"CapsLock"})," mapping to ",(0,s.jsx)(n.code,{children:"Ctrl"})," in Windows or\nUbuntu. There is only ",(0,s.jsx)(n.code,{children:"Ctrl"})," key in Windows / Ubuntu, and it is the most used\nmodifier key for me. Mapping ",(0,s.jsx)(n.code,{children:"CapsLock"})," to ",(0,s.jsx)(n.code,{children:"Ctrl"})," makes my left pinky feels so\nmuch better. However, there are ",(0,s.jsx)(n.code,{children:"Command"})," and ",(0,s.jsx)(n.code,{children:"Ctrl"})," on Mac, I need to choose\nwhich one to map to."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Command"})}),": The placement for ",(0,s.jsx)(n.code,{children:"Command"})," in Mac is not bad. I can easily do\n",(0,s.jsx)(n.code,{children:"Command+C"}),", ",(0,s.jsx)(n.code,{children:"Command+V"})," with left thumb pressing ",(0,s.jsx)(n.code,{children:"Command"}),". I can learn to use\nmy thumb to press ",(0,s.jsx)(n.code,{children:"Command"})," related shortcuts. However, I still use my Ubuntu\nlaptop and I find it weird that I accidentally press the ",(0,s.jsx)(n.code,{children:"Alt"})," key because of\nthe habit of using ",(0,s.jsx)(n.code,{children:"Command"})," in mac. I want the shortcuts to be as consistent as\npossible across all machines I use. As such, for most of the time, I still remap\n",(0,s.jsx)(n.code,{children:"CapsLock"})," to ",(0,s.jsx)(n.code,{children:"Command"})," on the Mac, and so the placement of shortcuts like copy\nand paste remains consistent."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Control"})}),": However, there are times that I need the ",(0,s.jsx)(n.code,{children:"Ctrl"})," key more than the\n",(0,s.jsx)(n.code,{children:"Command"})," key on Mac. For example, I often need ",(0,s.jsx)(n.code,{children:"Ctrl+C"})," to stop a process in\nthe terminal, or ",(0,s.jsx)(n.code,{children:"Ctrl+U"})," and ",(0,s.jsx)(n.code,{children:"Ctrl+D"})," to move up and down in Vim mode in text\neditors. I am used to expecting the ",(0,s.jsx)(n.code,{children:"CapsLock"})," key to work as a ",(0,s.jsx)(n.code,{children:"Ctrl"})," in those\ncases. Therefore, for the terminal and some text editors, I map ",(0,s.jsx)(n.code,{children:"CapsLock"})," to\n",(0,s.jsx)(n.code,{children:"Ctrl"})," key."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Option"})}),": To make it even more complicated, when I do\n",(0,s.jsx)(n.code,{children:"CapsLock + Backspace"}),", I want it to function like ",(0,s.jsx)(n.code,{children:"Ctrl + Backspace"})," in\nWindows/Ubuntu, which deletes 1 word at a time. For me, backspace a word\n(",(0,s.jsx)(n.code,{children:"Option + Backspace"}),") is more common than backspacing a line\n(",(0,s.jsx)(n.code,{children:"Command + Backspace"}),"). So I want ",(0,s.jsx)(n.code,{children:"CapsLock"})," to be ",(0,s.jsx)(n.code,{children:"Option"})," when it is used\nwith ",(0,s.jsx)(n.code,{children:"Backspace"}),". And similarly, I want ",(0,s.jsx)(n.code,{children:"CapsLock"})," to be ",(0,s.jsx)(n.code,{children:"Option"})," when I do the\n",(0,s.jsx)(n.code,{children:"= + Backspace"})," for forward deleting a word."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Escape"})}),": Last but not least, map ",(0,s.jsx)(n.code,{children:"CapsLock "}),"to ",(0,s.jsx)(n.code,{children:"Escape"})," when pressed alone.\nIn summary, I am mapping ",(0,s.jsx)(n.code,{children:"CapsLock"})," to ",(0,s.jsx)(n.code,{children:"Command"}),", ",(0,s.jsx)(n.code,{children:"Ctrl"}),", ",(0,s.jsx)(n.code,{children:"Option"})," when it is\npressed with another key, depending on the scenario, and map it to ",(0,s.jsx)(n.code,{children:"Escape"})," when\npressed alone."]}),"\n",(0,s.jsxs)(n.p,{children:["I am overloading ",(0,s.jsx)(n.code,{children:"CapsLock"})," so much because it is in such a comfortable position\nin a standard QWERTY keyboard and I want to maximize its functionality, and at\nthe same time create a very similar functionality compare to the ",(0,s.jsx)(n.code,{children:"Ctrl"})," key in\nWindows/Ubuntu."]}),"\n",(0,s.jsxs)(n.h3,{id:"the-capslock-variable",children:["The ",(0,s.jsx)(n.code,{children:"CapsLock"})," Variable"]}),"\n",(0,s.jsxs)(n.p,{children:["After a lot of investigation and experimentation, to be able to remap the\n",(0,s.jsx)(n.code,{children:"CapsLock"})," key to multiple modifier keys depending on the second key in the\ncombination, I must use a variable. I need to wait until the second key is\npressed to know which key the ",(0,s.jsx)(n.code,{children:"CapsLock"})," to map to. I cannot simply remap\n",(0,s.jsx)(n.code,{children:"CapsLock"})," to another modifier key when it is pressed."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, if I remap ",(0,s.jsx)(n.code,{children:"CapsLock"})," to ",(0,s.jsx)(n.code,{children:"Command"})," when ",(0,s.jsx)(n.code,{children:"CapsLock"})," is pressed, then\nit will always be ",(0,s.jsx)(n.code,{children:"Command + "})," something when I hold down ",(0,s.jsx)(n.code,{children:"CapsLock"}),". When I\npress ",(0,s.jsx)(n.code,{children:"Backspace"})," it will be ",(0,s.jsx)(n.code,{children:"Command + Backspace"}),', which I don\'t want. I cannot\n"lift" the ',(0,s.jsx)(n.code,{children:"Command"})," key when ",(0,s.jsx)(n.code,{children:"Backspace"})," is pressed, and change it to\n",(0,s.jsx)(n.code,{children:"Option + Backspace"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["What I can do instead, is define a ",(0,s.jsx)(n.code,{children:"caps_lock_is_held"})," variable like the\n",(0,s.jsx)(n.code,{children:"z_pressed"})," variable demonstrated above, and depending on which key is pressed,\nconditionally add a modifier to the key pressed. If it is a ",(0,s.jsx)(n.code,{children:"Backspace"}),", we do\n",(0,s.jsx)(n.code,{children:"Option + Backspace"}),". If it is another key, we do ",(0,s.jsx)(n.code,{children:"Command + <key>"}),". To\nconclude, when ",(0,s.jsx)(n.code,{children:"CapsLock"})," is being held, no modifier is triggered. Only when\nanother key is pressed, a modifier is being added conditionally. This gives the\nflexibility we want."]}),"\n",(0,s.jsxs)(n.p,{children:["And lastly, when ",(0,s.jsx)(n.code,{children:"CapsLock"})," is pressed alone, map it to ",(0,s.jsx)(n.code,{children:"Escape"}),". The\nconfiguration looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock",\n  "manipulators": [\n    {\n      "from": {\n        "key_code": "caps_lock",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [\n        { "set_variable": { "name": "caps_lock_is_held", "value": true } }\n      ],\n      "to_after_key_up": [\n        { "set_variable": { "name": "caps_lock_is_held", "value": false } }\n      ],\n      "to_if_alone": [{ "key_code": "escape" }],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["Please note that we only need to use variable because we want to map a single\nkey to a different modifier key depending on the second key. If the modifier key\nis always consistent, we can map the ",(0,s.jsx)(n.code,{children:"CapsLock"})," key with a simple ",(0,s.jsx)(n.code,{children:"from"})," ",(0,s.jsx)(n.code,{children:"to"}),"\nmanipulators. For example:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock to Command/Escape",\n  "manipulators": [\n    {\n      "from": {\n        "key_code": "caps_lock",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [{ "key_code": "left_command" }],\n      "to_if_alone": [{ "key_code": "escape" }],\n      "type": "basic"\n    }\n  ]\n}\n'})}),(0,s.jsx)(n.p,{children:"I started with this configuration, but only when I am not satisfied I created\nmore and switched to using variables. There are drawbacks for using variables,\nwhich I will explain below."})]}),"\n",(0,s.jsxs)(n.h3,{id:"capslock-as-option",children:[(0,s.jsx)(n.code,{children:"CapsLock"})," as ",(0,s.jsx)(n.code,{children:"Option"})]}),"\n",(0,s.jsxs)(n.p,{children:["First, we start with the simplest. Remapping ",(0,s.jsx)(n.code,{children:"CapsLock + Backspace"})," to\n",(0,s.jsx)(n.code,{children:"Option + Backspace"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock",\n  "manipulators": [\n    // Other manipulators\n    {\n      "conditions": [\n        { "name": "caps_lock_is_held", "type": "variable_if", "value": true }\n      ],\n      "from": {\n        "key_code": "delete_or_backspace",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [\n        {\n          "key_code": "delete_or_backspace",\n          "modifiers": ["left_option"]\n        }\n      ],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This configuration specifies if the ",(0,s.jsx)(n.code,{children:"caps_lock_is_held"})," variable is true, and\nthe backspace key is pressed, output the backspace key with the left option\nmodifier."]}),"\n",(0,s.jsxs)(n.h3,{id:"capslock-as-control",children:[(0,s.jsx)(n.code,{children:"CapsLock"})," as ",(0,s.jsx)(n.code,{children:"Control"})]}),"\n",(0,s.jsxs)(n.p,{children:["In some apps, I would like to use ",(0,s.jsx)(n.code,{children:"CapsLock"})," as ",(0,s.jsx)(n.code,{children:"Control"}),", so that I can do key\ncombinations that I am used to. Karabiner supports conditionally apply\nmanipulators by the applications using\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/conditions/frontmost-application/",children:(0,s.jsx)(n.code,{children:"frontmost_application_if"})}),".\nIt identifies an application by the bundle identifiers or the file paths. The\nlist of keys I remapped is mostly Vim key bindings or shortcuts in the terminal.\nThe following example is for mapping ",(0,s.jsx)(n.code,{children:"CapsLock + c"})," to ",(0,s.jsx)(n.code,{children:"Control + c"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock",\n  "manipulators": [\n    // Other manipulators\n    {\n      "conditions": [\n        { "name": "caps_lock_is_held", "type": "variable_if", "value": true },\n        {\n          "bundle_identifiers": [\n            "^com\\\\.googlecode\\\\.iterm2$",\n            "^com\\\\.jetbrains\\\\.rider$",\n            "^com\\\\.google\\\\.android\\\\.studio$"\n          ],\n          "file_paths": ["/Applications/Cursor.app/Contents/MacOS/Cursor"],\n          "type": "frontmost_application_if"\n        }\n      ],\n      "from": {\n        "key_code": "c",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [\n        {\n          "key_code": "c",\n          "modifiers": ["left_control"]\n        }\n      ],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["What this rule defines is if the app is iTerm2, Rider, Android Studio or Cursor,\n",(0,s.jsx)(n.code,{children:"CapsLock + c"})," becomes ",(0,s.jsx)(n.code,{children:"Control + c"}),". I did the same for\n",(0,s.jsx)(n.code,{children:'["a", "c", "d", "o", "r", "u", "v"]'}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"capslock-as-command",children:[(0,s.jsx)(n.code,{children:"CapsLock"})," as ",(0,s.jsx)(n.code,{children:"Command"})]}),"\n",(0,s.jsxs)(n.p,{children:["For all the remaining scenarios, I want ",(0,s.jsx)(n.code,{children:"CapsLock"})," to function as ",(0,s.jsx)(n.code,{children:"Command"}),".\nKarabiner provides a way to remap any key by doing\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/from/any/",children:(0,s.jsx)(n.code,{children:"from.any"})}),"\nkey code. Unfortunately,\n",(0,s.jsx)(n.a,{href:"https://github.com/pqrs-org/Karabiner-Elements/issues/3580",children:"it does not support returning what is that any key being captured"}),".\nWe cannot conveniently do from ",(0,s.jsx)(n.code,{children:"CapsLock + any"})," to ",(0,s.jsx)(n.code,{children:"Command + any"}),', and\nKarabiner substitutes the "any" in.']}),"\n",(0,s.jsxs)(n.p,{children:["Therefore, as you might have thought on when writing the rules above, I need to\nuse a script to generate all the combinations. Here is a sample manipulator for\nthe key ",(0,s.jsx)(n.code,{children:"a"}),", to map ",(0,s.jsx)(n.code,{children:"CapsLock + a"})," to ",(0,s.jsx)(n.code,{children:"Command + a"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "conditions": [\n    { "name": "caps_lock_is_held", "type": "variable_if", "value": true }\n  ],\n  "from": {\n    "key_code": "a",\n    "modifiers": { "optional": ["any"] }\n  },\n  "to": [\n    {\n      "key_code": "a",\n      "modifiers": ["left_command"]\n    }\n  ],\n  "type": "basic"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"I wrote a python script to generate this rule for every single key I need on the\nkeyboard:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:'def set_command_key(data, key_code):\n    data["manipulators"].append(\n        {\n            "conditions": [\n                {"name": "caps_lock_is_held", "type": "variable_if", "value": True},\n            ],\n            "from": {"key_code": key_code, "modifiers": {"optional": ["any"]}},\n            "to": [{"key_code": key_code, "modifiers": ["left_command"]}],\n            "type": "basic",\n        }\n    )\n\ndef generate_rule():\n    # some more code\n\n    command_keys = (\n        [chr(i) for i in range(ord("a"), ord("z") + 1)]\n        + [chr(i) for i in range(ord("0"), ord("9") + 1)]\n        + [\n            "grave_accent_and_tilde",\n            "hyphen",\n            "equal_sign",\n            "tab",\n            "open_bracket",\n            "close_bracket",\n            "backslash",\n            "semicolon",\n            "quote",\n            "return_or_enter",\n            "comma",\n            "period",\n            "slash",\n            "spacebar",\n            "left_arrow",\n            "right_arrow",\n            "up_arrow",\n            "down_arrow",\n        ]\n    )\n    for key in command_keys:\n        set_command_key(data, key)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["What this script does is for all the keys from ",(0,s.jsx)(n.code,{children:"a"})," to ",(0,s.jsx)(n.code,{children:"z"}),", plus all keys from\n",(0,s.jsx)(n.code,{children:"0"})," to ",(0,s.jsx)(n.code,{children:"9"}),", and all the symbol keys, space bar, arrow keys, and enter key,\ncreate a rule like the one above. It maps from ",(0,s.jsx)(n.code,{children:"CapsLock + <key>"})," to\n",(0,s.jsx)(n.code,{children:"Command + <key>"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"capslock--z",children:[(0,s.jsx)(n.code,{children:"CapsLock"})," + ",(0,s.jsx)(n.code,{children:"z"})]}),"\n",(0,s.jsxs)(n.p,{children:["If you are following along, and you test the configuration now, you will notice\n",(0,s.jsx)(n.code,{children:"CapsLock"})," + ",(0,s.jsx)(n.code,{children:"z"})," might be messed up at this point. Depending on how you order\nthe rules, you may result in different behaviours. In Karabiner, a rule ranked\nhigher in the list of configurations will be applied first. ",(0,s.jsx)(n.code,{children:"CapsLock + z"})," may\nnot work as ",(0,s.jsx)(n.code,{children:"Command + z"})," because earlier the ",(0,s.jsx)(n.code,{children:"z + ..."})," rules already captured\nthe ",(0,s.jsx)(n.code,{children:"z"})," key. In addition to that, ",(0,s.jsx)(n.code,{children:"CapsLock + z + h/j/k/l"})," will not work as how\nyou would expect for ",(0,s.jsx)(n.code,{children:"Command"})," + arrow keys."]}),"\n",(0,s.jsxs)(n.p,{children:["To fix it, we need to define additional rules for the ",(0,s.jsx)(n.code,{children:"z"})," rules based on the\n",(0,s.jsx)(n.code,{children:"caps_lock_is_held"})," variable. For example, for ",(0,s.jsx)(n.code,{children:"z + h"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock",\n  "manipulators": [\n    // Other manipulators\n    {\n      "conditions": [\n        { "name": "caps_lock_is_held", "type": "variable_if", "value": false },\n        { "name": "z_pressed", "type": "variable_if", "value": 1 }\n      ],\n      "from": {\n        "key_code": "h",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [{ "key_code": "left_arrow" }],\n      "type": "basic"\n    },\n    {\n      "conditions": [\n        { "name": "caps_lock_is_held", "type": "variable_if", "value": true },\n        { "name": "z_pressed", "type": "variable_if", "value": 1 }\n      ],\n      "from": {\n        "key_code": "h",\n        "modifiers": { "optional": ["any"] }\n      },\n      "to": [\n        {\n          "key_code": "left_arrow",\n          "modifiers": ["left_option"]\n        }\n      ],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Two rules are defined for each ",(0,s.jsx)(n.code,{children:"z + h/j/k/l"})," combination, one with ",(0,s.jsx)(n.code,{children:"CapsLock"}),"\nheld and one not. If the ",(0,s.jsx)(n.code,{children:"CapsLock"})," is held, add an option modifier. As you can\nimagine, all of these are generated with the python script."]}),"\n",(0,s.jsxs)(n.h3,{id:"capslock--click",children:[(0,s.jsx)(n.code,{children:"CapsLock"})," + click"]}),"\n",(0,s.jsxs)(n.p,{children:["If you map ",(0,s.jsx)(n.code,{children:"CapsLock"})," directly to ",(0,s.jsx)(n.code,{children:"Command"}),", you will be able to ",(0,s.jsx)(n.code,{children:"CapsLock"})," and\nleft click on mouse to be like ",(0,s.jsx)(n.code,{children:"Command"})," + click. The problem with variables is\nthis is no longer possible. Karabiner support mapping mouse click like key\npresses with ",(0,s.jsx)(n.code,{children:"from.pointing_button"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "CapsLock",\n  "manipulators": [\n    // Other manipulators\n    {\n      "conditions": [\n        { "name": "caps_lock_is_held", "type": "variable_if", "value": true }\n      ],\n      "from": {\n        "modifiers": { "optional": ["any"] },\n        "pointing_button": "button1"\n      },\n      "to": [\n        {\n          "modifiers": ["left_command"],\n          "pointing_button": "button1"\n        }\n      ],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["However, Karabiner does not support remapping the built-in trackpad on MacBook\nPro. If you check the list of devices in Karabiner settings, you will see the\ntrackpad is not supported.\n",(0,s.jsx)(n.a,{href:"https://github.com/pqrs-org/Karabiner-Elements/issues/2157",children:"Here is the issue for this problem"}),".\nI tried enabling overriding the trackpad by enabling unsafe configuration,\n",(0,s.jsx)(n.a,{href:"https://github.com/pqrs-org/Karabiner-Elements/issues/2157#issuecomment-1508261356",children:"as shown here"}),".\nIt made my trackpad unusable and I cannot see my cursor any more. And as stated\nin the linked comment, unsafe mode is not recommended. If you lost the trackpad,\nyou can quit the process in the terminal, see\n",(0,s.jsx)(n.a,{href:"https://karabiner-elements.pqrs.org/docs/manual/operation/quit/",children:"this documentation page on quitting Karabiner"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"left-shift--capslock",children:["Left ",(0,s.jsx)(n.code,{children:"Shift"})," + ",(0,s.jsx)(n.code,{children:"CapsLock"})]}),"\n",(0,s.jsxs)(n.p,{children:["At last, we need to be able to get back ",(0,s.jsx)(n.code,{children:"CapsLock"})," when needed. Same as before,\nI use left ",(0,s.jsx)(n.code,{children:"Shift"})," + ",(0,s.jsx)(n.code,{children:"CapsLock"})," and map it back to ",(0,s.jsx)(n.code,{children:"CapsLock"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "description": "Change left_shift + capslock to capslock",\n  "manipulators": [\n    {\n      "from": {\n        "key_code": "caps_lock",\n        "modifiers": {\n          "mandatory": ["left_shift"],\n          "optional": ["any"]\n        }\n      },\n      "to": [\n        {\n          "key_code": "caps_lock",\n          "modifiers": []\n        }\n      ],\n      "type": "basic"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"full-configuration",children:"Full Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["This is it! Other than the complicated, generated rules for ",(0,s.jsx)(n.code,{children:"CapsLock"}),", the rest\nare quite simple."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://gist.github.com/ethanppl/d0d33473c4b004bc91751356562e3b85",children:"Link to the Python script"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.a,{href:"https://gist.github.com/ethanppl/f45670e1d178d9dffc8071b9c379f8ce",children:["Link to the complete ",(0,s.jsx)(n.code,{children:"karabiner.json"})," file"]})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"comparing-autohotkey-keyd-and-karabiner",children:"Comparing AutoHotKey, keyd and Karabiner"}),"\n",(0,s.jsxs)(n.p,{children:["I started remapping my keyboard with ",(0,s.jsx)(n.a,{href:"https://www.autohotkey.com/",children:"AutoHotkey"}),"\non Windows, ",(0,s.jsx)(n.a,{href:"/blog/2024/02/29/dual-boot-guide",children:"dual boot to Ubuntu"})," and switched\nto ",(0,s.jsx)(n.a,{href:"/blog/2024/09/08/keyd",children:"keyd"}),", and now learned to configure Karabiner for Mac.\nAll three have different philosophy around how keyboards can be remapped."]}),"\n",(0,s.jsxs)(n.p,{children:["I find ",(0,s.jsx)(n.code,{children:"AutoHotkey"})," the most powerful. It is almost a tool with too many\nfeatures. It can control mouse, perform string replacements, and many more like\nretrieving the screen, modifying file systems, etc. In contrast, it is a common\npractice for Unix daemons to focus and handle a single domain, and chain\ndifferent daemons to perform complex things. However, given its powerful\nfeatures, I think ",(0,s.jsx)(n.code,{children:"AutoHotkey"})," is also the hardest to get started. This includes\nthe subtle difference between v1 and v2, its syntax and philosophy is harder to\nunderstand, and overall harder to integrate. For example, I had to do a few\nsteps to build the configuration and automatically run it like a daemon on\nWindows startup."]}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.code,{children:"keyd"}),", I like its philosophy and syntax the most. The concept of layers and\neach configuration is applying a new layer for the keyboard is clear. The\nconfiguration syntax is concise and easy to understand. I also like that it\nworks great with Wayland in Gnome and is very easy to enable, reload and test.\nThe instructions in the man page are clear too. The monitor command is super\nuseful to debug. My major wish for ",(0,s.jsx)(n.code,{children:"keyd"})," is to expand what it can support out\nof the box, like Unicode characters and string replacements. Also, so far I\ncannot find a keyboard tool that can control the mouse in Wayland. If ",(0,s.jsx)(n.code,{children:"keyd"})," can\ndo that, that would be awesome."]}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.code,{children:"Karabiner"}),", I think it is the easiest to integrate and configure. Same as\nmany apps on macOS, it is the easiest in terms of installation and getting\nstarted. It just works. Not a single command or configuration needed for it to\nstart and auto-reload. The event viewer is also super useful for debugging.\nHaving a GUI and ability to share configurations in app is a bonus. My biggest\ncomplaint is the syntax and configuration is just hard to use. I consider the\nJSON syntax the hardest to read and write. The built-in editor is also\nuser-unfriendly, to the point that the window cannot even be resized. Using\nvariables is comparatively worse than the concept of layers in ",(0,s.jsx)(n.code,{children:"keyd"}),". As shown\nin the above example, a lot of the rules need to be generated from a script for\nevery permutation of combination I add. It is considerably much harder to\nconfigure nested layers like what I can do in ",(0,s.jsx)(n.code,{children:"keyd"}),". And of course, I really\nwish I can get which key code is pressed if I captured with\n",(0,s.jsx)(n.code,{children:'from.any = "key_code"'}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Just my 0.02 after using all three of them. I understand it is unfair to\ncompare, as each of them are limited by the operating system or window manager\nthat the system is using. Users cannot freely choose or switch between either\nbecause of their operating systems."}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"Overall, despite the complexity, I still enjoy configuring and tuning the\nconfigurations to a state that I am satisfied with. Thanks for reading, and I\nhope this is helpful for people attempting to create something similar. Now I\nfinally have a somewhat consistent keyboard shortcuts across Windows, Mac and\nUbuntu that I can share!"}),"\n",(0,s.jsx)(n.h3,{id:"remarks",children:"Remarks"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If you are interested about keyboards, you may be interested at the\n",(0,s.jsx)(n.a,{href:"/computers/keyboard",children:"keyboard page"})]}),"\n",(0,s.jsxs)(n.li,{children:["If you are interested about other shortcuts on mac,\n",(0,s.jsx)(n.a,{href:"/computers/configs#mac",children:"see this page"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://support.apple.com/en-us/102650",children:"Mac keyboard shortcuts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://support.apple.com/en-us/102646",children:"Take a screenshot on Mac"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},6915:(e,n,o)=>{o.d(n,{A:()=>i});const i=o.p+"assets/images/complex-rules-bd74cc794ee7278c10cb7955b625cc2b.png"},5282:(e,n,o)=>{o.d(n,{A:()=>i});const i=o.p+"assets/images/event-viewer-ab972b8d86d6bb8263aaab8521016344.png"},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>r});var i=o(6540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},9755:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/10/19/karabiner","source":"@site/blog/2025-10-19-karabiner.md","title":"How I use Karabiner to remap my Mac keyboard","description":"A couple of months ago, I got a MacBook Pro. The first thing I need to do is to","date":"2025-10-19T00:00:00.000Z","tags":[{"inline":true,"label":"Mac","permalink":"/blog/tags/mac"},{"inline":true,"label":"Tips & Configs","permalink":"/blog/tags/tips-and-configs"},{"inline":true,"label":"Computers","permalink":"/blog/tags/computers"}],"readingTime":19.68,"hasTruncateMarker":true,"authors":[{"name":"Ethan Pang","url":"https://ethanppl.com/","imageURL":"https://github.com/ethanppl.png","key":"ethan","page":null}],"frontMatter":{"title":"How I use Karabiner to remap my Mac keyboard","tags":[{"label":"Mac","permalink":"mac"},{"label":"Tips & Configs","permalink":"tips-and-configs"},{"label":"Computers","permalink":"computers"}],"toc_min_heading_level":2,"toc_max_heading_level":3,"authors":"ethan"},"unlisted":false,"nextItem":{"title":"My $4/month self-hosted web server setup","permalink":"/blog/2025/05/25/self-host"}}')}}]);